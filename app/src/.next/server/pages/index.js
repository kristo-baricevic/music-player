(()=>{var e={};e.id=405,e.ids=[405,888,660],e.modules={8618:()=>{throw Error("Module parse failed: Unexpected token (255:35)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| ];\n| \n> export const loadInitialSong = (req: Request, res: Response) => {\n|   try {\n|     if (!songsData) {")},1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},1420:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>g,default:()=>p,getServerSideProps:()=>x,getStaticPaths:()=>f,getStaticProps:()=>m,reportWebVitals:()=>h,routeModule:()=>b,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>P,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>y});var a=r(7093),n=r(5244),o=r(1323),i=r(5388),l=r.n(i),c=r(1940),u=r(5303),d=e([c,u]);[c,u]=d.then?(await d)():d;let p=(0,o.l)(u,"default"),m=(0,o.l)(u,"getStaticProps"),f=(0,o.l)(u,"getStaticPaths"),x=(0,o.l)(u,"getServerSideProps"),g=(0,o.l)(u,"config"),h=(0,o.l)(u,"reportWebVitals"),y=(0,o.l)(u,"unstable_getStaticProps"),S=(0,o.l)(u,"unstable_getStaticPaths"),P=(0,o.l)(u,"unstable_getStaticParams"),j=(0,o.l)(u,"unstable_getServerProps"),v=(0,o.l)(u,"unstable_getServerSideProps"),b=new a.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:c.default,Document:l()},userland:u});s()}catch(e){s(e)}})},5764:(e,t,r)=>{"use strict";r.d(t,{Cr:()=>i});let s=require("gsap"),a=(e,t)=>{let r=document.getElementById("starburst");for(let a=0;a<e;a++){let o=document.createElement("div");o.className="line",o.style.transform=`rotate(${360/e*a}deg)`,o.style.backgroundColor=n(),r?.appendChild(o),s.gsap.fromTo(o,{width:0,opacity:0},{duration:2,width:"50%",opacity:.25,ease:"power2.inOut",yoyo:!0,repeat:-1,delay:a*t})}},n=()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},o=()=>{let e=document.getElementById("night-sky"),t=n();for(let r=0;r<300;r++){let r=document.createElement("div");r.className="star";let a=2*Math.random()+1;if(r.style.width=`${a}px`,r.style.height=`${a}px`,r.style.backgroundColor=t,e){let t=Math.random()*e.offsetWidth,s=Math.random()*e.offsetHeight;r.style.left=`${t}px`,r.style.top=`${s}px`,e.appendChild(r)}s.gsap.to(r,{opacity:Math.random(),duration:2*Math.random()+1,repeat:-1,yoyo:!0,ease:"power1.inOut"})}},i=(e,t,r)=>{if(l(),!e)return null;let n=60/e,i=`hsl(${t%360}, 100%, 50%)`;s.gsap.to(".box",{rotate:360,y:r/1e3,duration:n}),s.gsap.fromTo(".sample-info h3",{opacity:0},{opacity:1,duration:2,delay:2}),s.gsap.fromTo(".sample-info p",{opacity:0},{opacity:1,duration:2.5,delay:2.15}),s.gsap.to(".letter",{color:i,duration:1.5,repeat:-1,yoyo:!0,delay:1,stagger:.5,repeatDelay:.5}),a(100,n),o()},l=()=>{s.gsap.killTweensOf(".box, .letter, .star, .line");let e=document.getElementById("starburst"),t=document.getElementById("night-sky");e&&(e.innerHTML=""),t&&(t.innerHTML="")}},645:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{D8:()=>u,ZP:()=>d});var a=r(997),n=r(6689),o=r(3291),i=r(8970),l=r(8657),c=e([o]);o=(c.then?(await c)():c)[0];let u=(0,n.createContext)(void 0),d=({children:e})=>{let t=(0,o.useDispatch)(),{currentSongIndex:r,trackIndex:s,isPlaying:c,isLoading:d,isMuted:p,trackLinerNotes:m}=(0,o.useSelector)(e=>e.audio),[f,x]=(0,n.useState)({song:null,index:0,isPlaying:!1,isLoading:!1,isMuted:[!1,!1,!1]}),[g,h]=(0,n.useState)(0),[y,S]=(0,n.useState)(1),[P,j]=(0,n.useState)(120),[v,b]=(0,n.useState)({track1:!1,track2:!1,track3:!1}),[k,A]=(0,n.useState)(0);(0,n.useEffect)(()=>{b({track1:!0,track2:!0,track3:!0}),console.log(r+1);let e=`http://localhost:5000/static/music/song${r+1}`,t={track1:new i.Howl({src:[`${e}/track1.mp3`],onload:()=>b(e=>({...e,track1:!1}))}),track2:new i.Howl({src:[`${e}/track2.mp3`],onload:()=>b(e=>({...e,track2:!1}))}),track3:new i.Howl({src:[`${e}/track3.mp3`],onload:()=>b(e=>({...e,track3:!1}))})};x({...f,song:t,index:r})},[r,t]),(0,n.useEffect)(()=>{let e;let t=()=>{if(f.song&&f.isPlaying){let r=f.song.track1,s=r.seek()/r.duration()*100;A(s),e=requestAnimationFrame(t)}};return f.isPlaying&&(e=requestAnimationFrame(t)),()=>{cancelAnimationFrame(e)}});let E={isPlaying:c,isLoading:d,currentSongIndex:r,progress:k,bpm:P,analysisData1:g,analysisData2:y,currentSong:f.song,trackLinerNotes:m,nextSong:()=>t((0,l.yI)()),prevSong:()=>t((0,l.RP)()),isMuted:p,loadNewSong:e=>t((0,l.uu)(e)),playPauseTracks:()=>t((0,l.jh)()),toggleMuteTrack:e=>t((0,l.xb)(e))};return a.jsx(u.Provider,{value:E,children:e})};s()}catch(e){s(e)}})},9632:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>l});var a=r(997),n=r(6689),o=r(645),i=e([o]);o=(i.then?(await i)():i)[0];let l=({currentSongIndex:e})=>{let t=(0,n.useContext)(o.D8);if(!t)return null;let{trackLinerNotes:r}=t,s=r.find(t=>t.id===e+1);return s?(0,a.jsxs)("div",{className:"sample-info mt-10 px-6",children:[(0,a.jsxs)("h3",{children:["Samples used in ”",s.title,"”: "]}),s.samples.map((e,t)=>a.jsx("p",{children:e.parts.map((e,t)=>e.link?a.jsx("a",{href:e.link,className:"text-sky-400",children:e.text},t):a.jsx("span",{children:e.text},t))},t))]}):null};s()}catch(e){s(e)}})},1656:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>u});var a=r(997),n=r(6689),o=r(645),i=r(7197),l=r(4563),c=e([o,l]);[o,l]=c.then?(await c)():c;let u=()=>{let e=(0,n.useContext)(o.D8);(0,n.useEffect)(()=>{e&&e.trackLinerNotes&&e.trackLinerNotes.length>0&&e.loadNewSong(e.currentSongIndex)},[e]);let t=(0,n.useRef)(null),r=(0,n.useRef)(null),s=(0,n.useRef)(null),c=(0,n.useRef)(null),u=(0,n.useRef)(null),d=(0,n.useRef)(null),p=(0,n.useRef)(null);if((0,n.useRef)(null),(0,n.useRef)(null),!e)return null;let{isMuted:m,isLoading:f,isPlaying:x,trackLinerNotes:g,currentSongIndex:h,bpm:y,analysisData1:S,analysisData2:P,progress:j,loadNewSong:v,prevSong:b,nextSong:k,playPauseTracks:A,toggleMuteTrack:E}=e,w=g&&g[h];return a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{ref:t,className:"music-container",id:"music-container",children:[(0,a.jsxs)("div",{className:"music-info",children:[a.jsx("img",{className:"cover-image",src:`http://localhost:5000/static/music/song${h+1}`}),(0,a.jsxs)("div",{className:"flex flex-col px-2",children:[a.jsx("h4",{className:"flex",children:w?w.title:"Loading..."}),a.jsx("div",{className:"progress-container flex",ref:p,onClick:e=>{let t=p.current?.clientWidth||0,r=e.nativeEvent.offsetX,s=u.current?.duration||0;u.current&&(u.current.currentTime=r/t*s)},children:a.jsx("div",{className:"progress",ref:d,style:{width:`${j}%`}})})]})]}),a.jsx("div",{className:"container-background",children:(0,a.jsxs)("div",{className:"navigation",children:[a.jsx("button",{ref:s,className:"action-btn",onClick:()=>{b()},children:a.jsx(i.FontAwesomeIcon,{icon:l.faBackward})}),a.jsx("button",{ref:r,className:"action-btn action-btn-big",onClick:()=>{console.log("click"),A(),t.current&&x?t.current?.classList.remove("play"):t.current?.classList.add("play")},children:f?a.jsx(i.FontAwesomeIcon,{icon:l.faSpinner,spin:!0}):a.jsx(i.FontAwesomeIcon,{icon:x?l.faPause:l.faPlay})}),a.jsx("button",{ref:c,className:"action-btn",onClick:()=>{k()},children:a.jsx(i.FontAwesomeIcon,{icon:l.faForward})})]})}),a.jsx("div",{className:"flex flex-row items-center justify-center z-20 mt-6",children:[0,1,2].map(e=>a.jsx("button",{className:"playButton flex mx-4 bg-cyan-700 p-4 hover:bg-cyan-600 active:bg-cyan-900 ml-2 rounded-full",onClick:()=>E(e),children:0===e?m[e]?a.jsx(i.FontAwesomeIcon,{icon:l.faGuitar,size:"2xl",fade:!0}):a.jsx(i.FontAwesomeIcon,{icon:l.faGuitar,size:"2xl"}):1===e?m[e]?a.jsx(i.FontAwesomeIcon,{icon:l.faMicrophone,size:"2xl",fade:!0}):a.jsx(i.FontAwesomeIcon,{icon:l.faMicrophone,size:"2xl"}):m[e]?a.jsx(i.FontAwesomeIcon,{icon:l.faDrum,size:"2xl",fade:!0}):a.jsx(i.FontAwesomeIcon,{icon:l.faDrum,size:"2xl"})},e))})]})})};s()}catch(e){s(e)}})},1940:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>c});var a=r(997),n=r(3291);r(2379);var o=r(645),i=r(9731),l=e([n,o,i]);[n,o,i]=l.then?(await l)():l;let c=function({Component:e,pageProps:t}){return a.jsx(n.Provider,{store:i.Z,children:a.jsx(o.ZP,{children:a.jsx(e,{...t})})})};s()}catch(e){s(e)}})},5303:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>d});var a=r(997),n=r(6689),o=r(645),i=r(1656),l=r(9632),c=r(5764),u=e([o,i,l]);function d(){let e=(0,n.useContext)(o.D8);if((0,n.useEffect)(()=>{if(e){let{currentSongIndex:t,loadNewSong:r,bpm:s,analysisData1:a,analysisData2:n}=e;r(t),(0,c.Cr)(s,a,n)}},[e?.currentSongIndex,e?.bpm,e?.analysisData1,e?.analysisData2]),!e)return null;let{currentSongIndex:t}=e;return(0,a.jsxs)("main",{className:"flex flex-col min-h-screen items-center justify-center",children:[a.jsx("div",{className:"night-sky",id:"night-sky"}),a.jsx("div",{className:"page-title flex justify-center",children:"kr1st0-beats".split("").map((e,t)=>a.jsx("span",{className:"letter text-2xl",id:`letter-${t}`,children:e},t))}),a.jsx("div",{className:"flex items-center justify-center box mb-10 h-80 w-80 bg-cyan-300 rounded-lg",children:a.jsx(i.Z,{})}),a.jsx("div",{id:"starburst",className:"starburst"}),a.jsx(l.Z,{currentSongIndex:t})]})}[o,i,l]=u.then?(await u)():u,s()}catch(e){s(e)}})},1418:(e,t,r)=>{"use strict";var s;r.d(t,{$:()=>s}),function(e){e.PLAY_PAUSE_TRACKS="PLAY_PAUSE_TRACKS",e.LOAD_SONG="LOAD_SONG",e.TOGGLE_MUTE_TRACK="TOGGLE_MUTE_TRACK",e.NEXT_SONG="NEXT_SONG",e.PREV_SONG="PREV_SONG",e.SET_VOLUME="SET_VOLUME"}(s||(s={}))},8657:(e,t,r)=>{"use strict";r.d(t,{RP:()=>l,jh:()=>o,uu:()=>n,xb:()=>c,yI:()=>i});var s=r(1418),a=r(8618);let n=e=>({type:s.$.LOAD_SONG,payload:e}),o=()=>({type:s.$.PLAY_PAUSE_TRACKS}),i=()=>(e,t)=>{let{audio:r}=t(),n=(r.currentSongIndex+1)%a.songsData.length;e({type:s.$.NEXT_SONG,payload:n})},l=()=>(e,t)=>{let{audio:r}=t(),n=(r.currentSongIndex-1)%a.songsData.length;e({type:s.$.PREV_SONG,payload:n})},c=e=>({type:s.$.TOGGLE_MUTE_TRACK,payload:e})},7562:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(1418);let a={currentSongIndex:0,trackLinerNotes:[],isMuted:[!1,!1,!1],isLoading:!1,isPlaying:!0,error:!1,volume:1},n=(e=a,t)=>{switch(t.type){case s.$.PLAY_PAUSE_TRACKS:return{...e,isPlaying:!e.isPlaying};case s.$.LOAD_SONG:return{...e,currentSongIndex:t.payload,isPlaying:!1};case s.$.TOGGLE_MUTE_TRACK:let r=e.isMuted.map((e,r)=>r===t.payload?!e:e);return{...e,isMuted:r};case s.$.NEXT_SONG:case s.$.PREV_SONG:return{...e,currentSongIndex:t.payload,isPlaying:!1};case s.$.SET_VOLUME:return{...e,volume:t.payload};default:return e}}},9731:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>l});var a=r(3258),n=r(7562),o=r(6211),i=e([a,o]);[a,o]=i.then?(await i)():i;let l=(0,a.configureStore)({reducer:{audio:n.Z},middleware:e=>e().concat(o.thunk)});s()}catch(e){s(e)}})},2379:()=>{},5244:(e,t)=>{"use strict";var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},7197:e=>{"use strict";e.exports=require("@fortawesome/react-fontawesome")},8970:e=>{"use strict";e.exports=require("howler-with-buffer")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},4563:e=>{"use strict";e.exports=import("@fortawesome/free-solid-svg-icons")},3258:e=>{"use strict";e.exports=import("@reduxjs/toolkit")},3291:e=>{"use strict";e.exports=import("react-redux")},6211:e=>{"use strict";e.exports=import("redux-thunk")},1017:e=>{"use strict";e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[388],()=>r(1420));module.exports=s})();