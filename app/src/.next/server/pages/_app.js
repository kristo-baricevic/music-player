(()=>{var e={};e.id=888,e.ids=[888],e.modules={8618:()=>{throw Error("Module parse failed: Unexpected token (255:35)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| ];\n| \n> export const loadInitialSong = (req: Request, res: Response) => {\n|   try {\n|     if (!songsData) {")},645:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{D8:()=>l,ZP:()=>d});var s=r(997),n=r(6689),o=r(3291),i=r(8970),c=r(8657),u=e([o]);o=(u.then?(await u)():u)[0];let l=(0,n.createContext)(void 0),d=({children:e})=>{let t=(0,o.useDispatch)(),{currentSongIndex:r,trackIndex:a,isPlaying:u,isLoading:d,isMuted:p,trackLinerNotes:S}=(0,o.useSelector)(e=>e.audio),[g,y]=(0,n.useState)({song:null,index:0,isPlaying:!1,isLoading:!1,isMuted:[!1,!1,!1]}),[_,E]=(0,n.useState)(0),[x,P]=(0,n.useState)(1),[h,k]=(0,n.useState)(120),[T,A]=(0,n.useState)({track1:!1,track2:!1,track3:!1}),[O,m]=(0,n.useState)(0);(0,n.useEffect)(()=>{A({track1:!0,track2:!0,track3:!0}),console.log(r+1);let e=`http://localhost:5000/static/music/song${r+1}`,t={track1:new i.Howl({src:[`${e}/track1.mp3`],onload:()=>A(e=>({...e,track1:!1}))}),track2:new i.Howl({src:[`${e}/track2.mp3`],onload:()=>A(e=>({...e,track2:!1}))}),track3:new i.Howl({src:[`${e}/track3.mp3`],onload:()=>A(e=>({...e,track3:!1}))})};y({...g,song:t,index:r})},[r,t]),(0,n.useEffect)(()=>{let e;let t=()=>{if(g.song&&g.isPlaying){let r=g.song.track1,a=r.seek()/r.duration()*100;m(a),e=requestAnimationFrame(t)}};return g.isPlaying&&(e=requestAnimationFrame(t)),()=>{cancelAnimationFrame(e)}});let G={isPlaying:u,isLoading:d,currentSongIndex:r,progress:O,bpm:h,analysisData1:_,analysisData2:x,currentSong:g.song,trackLinerNotes:S,nextSong:()=>t((0,c.yI)()),prevSong:()=>t((0,c.RP)()),isMuted:p,loadNewSong:e=>t((0,c.uu)(e)),playPauseTracks:()=>t((0,c.jh)()),toggleMuteTrack:e=>t((0,c.xb)(e))};return s.jsx(l.Provider,{value:G,children:e})};a()}catch(e){a(e)}})},1940:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>u});var s=r(997),n=r(3291);r(2379);var o=r(645),i=r(9731),c=e([n,o,i]);[n,o,i]=c.then?(await c)():c;let u=function({Component:e,pageProps:t}){return s.jsx(n.Provider,{store:i.Z,children:s.jsx(o.ZP,{children:s.jsx(e,{...t})})})};a()}catch(e){a(e)}})},1418:(e,t,r)=>{"use strict";var a;r.d(t,{$:()=>a}),function(e){e.PLAY_PAUSE_TRACKS="PLAY_PAUSE_TRACKS",e.LOAD_SONG="LOAD_SONG",e.TOGGLE_MUTE_TRACK="TOGGLE_MUTE_TRACK",e.NEXT_SONG="NEXT_SONG",e.PREV_SONG="PREV_SONG",e.SET_VOLUME="SET_VOLUME"}(a||(a={}))},8657:(e,t,r)=>{"use strict";r.d(t,{RP:()=>c,jh:()=>o,uu:()=>n,xb:()=>u,yI:()=>i});var a=r(1418),s=r(8618);let n=e=>({type:a.$.LOAD_SONG,payload:e}),o=()=>({type:a.$.PLAY_PAUSE_TRACKS}),i=()=>(e,t)=>{let{audio:r}=t(),n=(r.currentSongIndex+1)%s.songsData.length;e({type:a.$.NEXT_SONG,payload:n})},c=()=>(e,t)=>{let{audio:r}=t(),n=(r.currentSongIndex-1)%s.songsData.length;e({type:a.$.PREV_SONG,payload:n})},u=e=>({type:a.$.TOGGLE_MUTE_TRACK,payload:e})},7562:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(1418);let s={currentSongIndex:0,trackLinerNotes:[],isMuted:[!1,!1,!1],isLoading:!1,isPlaying:!0,error:!1,volume:1},n=(e=s,t)=>{switch(t.type){case a.$.PLAY_PAUSE_TRACKS:return{...e,isPlaying:!e.isPlaying};case a.$.LOAD_SONG:return{...e,currentSongIndex:t.payload,isPlaying:!1};case a.$.TOGGLE_MUTE_TRACK:let r=e.isMuted.map((e,r)=>r===t.payload?!e:e);return{...e,isMuted:r};case a.$.NEXT_SONG:case a.$.PREV_SONG:return{...e,currentSongIndex:t.payload,isPlaying:!1};case a.$.SET_VOLUME:return{...e,volume:t.payload};default:return e}}},9731:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>c});var s=r(3258),n=r(7562),o=r(6211),i=e([s,o]);[s,o]=i.then?(await i)():i;let c=(0,s.configureStore)({reducer:{audio:n.Z},middleware:e=>e().concat(o.thunk)});a()}catch(e){a(e)}})},2379:()=>{},8970:e=>{"use strict";e.exports=require("howler-with-buffer")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},3258:e=>{"use strict";e.exports=import("@reduxjs/toolkit")},3291:e=>{"use strict";e.exports=import("react-redux")},6211:e=>{"use strict";e.exports=import("redux-thunk")}};var t=require("../webpack-runtime.js");t.C(e);var r=t(t.s=1940);module.exports=r})();