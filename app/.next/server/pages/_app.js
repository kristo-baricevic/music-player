(()=>{var e={};e.id=888,e.ids=[888],e.modules={6133:(e,t,r)=>{"use strict";r.d(t,{D8:()=>g,ZP:()=>_});var a=r(997),n=r(6689),s=r(3509),o=r(6010),c=r(3778);let i=e=>({type:c.$.LOAD_SONG,payload:e}),l=()=>({type:c.$.PLAY_PAUSE_TRACKS}),u=()=>(e,t)=>{let{audio:r}=t(),a=(r.currentSongIndex+1)%r.trackLinerNotes.length;e({type:c.$.NEXT_SONG,payload:a})},d=()=>(e,t)=>{let{audio:r}=t(),a=(r.currentSongIndex-1)%r.trackLinerNotes.length;e({type:c.$.PREV_SONG,payload:a})},S=e=>({type:c.$.TOGGLE_MUTE_TRACK,payload:e}),g=(0,n.createContext)(void 0),_=({children:e})=>{let t=(0,s.I0)(),{currentSongIndex:r,trackIndex:c,isPlaying:_,isLoading:E,isMuted:p,trackLinerNotes:T}=(0,s.v9)(e=>e.audio),[P,k]=(0,n.useState)({song:null,index:0,isPlaying:!1,isLoading:!1,isMuted:[!1,!1,!1]}),[y,A]=(0,n.useState)(0),[O,G]=(0,n.useState)(1),[L,N]=(0,n.useState)(120),[m,x]=(0,n.useState)({track1:!1,track2:!1,track3:!1}),[$,v]=(0,n.useState)(0);(0,n.useEffect)(()=>{x({track1:!0,track2:!0,track3:!0}),console.log(r+1);let e=`http://localhost:3000/storage/music/song${r+1}`,t={track1:new o.Howl({src:[`${e}/track1.mp3`],onload:()=>x(e=>({...e,track1:!1}))}),track2:new o.Howl({src:[`${e}/track2.mp3`],onload:()=>x(e=>({...e,track2:!1}))}),track3:new o.Howl({src:[`${e}/track3.mp3`],onload:()=>x(e=>({...e,track3:!1}))})};k({...P,song:t,index:r})},[r,t]),(0,n.useEffect)(()=>{let e;let t=()=>{if(P.song&&P.isPlaying){let r=P.song.track1;v(r.seek()/r.duration()*100),e=requestAnimationFrame(t)}};return P.isPlaying&&(e=requestAnimationFrame(t)),()=>{cancelAnimationFrame(e)}});let M={isPlaying:_,isLoading:E,currentSongIndex:r,progress:$,bpm:L,analysisData1:y,analysisData2:O,currentSong:P.song,trackLinerNotes:T,nextSong:()=>t(u()),prevSong:()=>t(d()),isMuted:p,loadNewSong:e=>t(i(e)),playPauseTracks:()=>t(l()),toggleMuteTrack:e=>t(S(e))};return a.jsx(g.Provider,{value:M,children:e})}},7696:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(997),n=r(3509);r(6290);var s=r(6133),o=r(8572),c=r(3778);let i={currentSongIndex:0,trackLinerNotes:[],isMuted:[!1,!1,!1],isLoading:!1,isPlaying:!0,error:!1,volume:1};var l=r(543);let u=(0,o.xC)({reducer:{audio:(e=i,t)=>{switch(t.type){case c.$.PLAY_PAUSE_TRACKS:return{...e,isPlaying:!e.isPlaying};case c.$.LOAD_SONG:return{...e,currentSongIndex:t.payload,isPlaying:!1};case c.$.TOGGLE_MUTE_TRACK:let r=e.isMuted.map((e,r)=>r===t.payload?!e:e);return{...e,isMuted:r};case c.$.NEXT_SONG:case c.$.PREV_SONG:return{...e,currentSongIndex:t.payload,isPlaying:!1};case c.$.SET_VOLUME:return{...e,volume:t.payload};default:return e}}},middleware:e=>e().concat(l.I)}),d=function({Component:e,pageProps:t}){return a.jsx(n.zt,{store:u,children:a.jsx(s.ZP,{children:a.jsx(e,{...t})})})}},3778:(e,t,r)=>{"use strict";var a;r.d(t,{$:()=>a}),function(e){e.PLAY_PAUSE_TRACKS="PLAY_PAUSE_TRACKS",e.LOAD_SONG="LOAD_SONG",e.TOGGLE_MUTE_TRACK="TOGGLE_MUTE_TRACK",e.NEXT_SONG="NEXT_SONG",e.PREV_SONG="PREV_SONG",e.SET_VOLUME="SET_VOLUME"}(a||(a={}))},6290:()=>{},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[838],()=>r(7696));module.exports=a})();